<% require 'time' %>
<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8"/>
<title><%= doctitle %></title>
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><%
[:description, :author].each do |key|
  if attr? key %>
<meta name="<%= key %>" content="<%= attr(key) %>"><%
  end
end %>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
<link rel="alternate" type="application/atom+xml" href="/feed.xml">
<style><%= File.read("enough.css/enough.min.css") %><%= File.read("ad.min.css") %>nav{display:flex;justify-content:space-between}</style>
<% if attr?(:image) %>
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@jkreeftmeijer">
<meta name="twitter:creator" content="@jkreeftmeijer">
<meta name="twitter:title" content="<%= doctitle %>">
<meta name="twitter:description" content="<%= attr(:description) %>">
<meta name="twitter:image" content="<%= attr(:image) %>">
<% end %>
<% if attr?(:url) %><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "<%= attr(:url) %>"
  },
  "headline": "<%= doctitle %>",
  "image": <%= [attr(:image)].inspect %>,
  "datePublished": "<%= Date.parse(attr(:revdate)).iso8601 %>",
  "dateModified": "<%= Time.parse(attr(:docdatetime)).utc.iso8601 %>",
  "author": {
    "@type": "Person",
    "name": "Jeff Kreeftmeijer"
  },
  "description": "<%= attr(:description) %>"
}
</script><% end %>
<h1><%= @header.title %></h1>
By <a href="/" rel="author"><%= attr(:author) %></a>

<%= content %>

<% unless !footnotes? || attr?(:nofootnotes) %>
  <div id="footnotes">
    <hr>
    <% footnotes.each do |fn| %>
      <div class="footnote" id="_footnote_<%= fn.index %>">
        <a href="#_footnoteref_<%= fn.index %>"><%= fn.index %></a>. <%= fn.text %>
      </div>
    <% end %>
  </div>
<% end %>

<hr/>
<nav>
  <a href="/" rel="author">Jeff Kreeftmeijer</a>
  <a href="/archive/">Archive</a>
  <a href="https://twitter.com/jkreeftmeijer">Twitter</a>
  <a href="https://github.com/jeffkreeftmeijer">Github</a>
  <a href="/feed.xml">RSS</a>
</nav>

<aside>
  <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=jeffkreeftmeijercom" id="_carbonads_js"></script>
</aside>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12888762-1', 'auto');
  ga('send', 'pageview');
</script>
</html>
