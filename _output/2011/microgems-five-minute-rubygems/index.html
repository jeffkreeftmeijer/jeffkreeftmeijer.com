<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="jeff kreeftmeijer, jeffkreeftmeijer" />
  <meta name="description" content="Creating RubyGems out of libraries you want to use in multiple projects, without the open source." />
  <title>
    
      MicroGems: five minute RubyGems
      
         â€” Jeff Kreeftmeijer
     
    
  </title>
  <style>body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}q:before,q:after{content:''}abbr,acronym{border:0}#ads{position:absolute;width:425px;max-width:50%;left:50%;top:145px;margin:auto;overflow:hidden;z-index:0}.ad{margin:0 0 20px 295px;width:130px;font-size:11px;line-height:1.2}.ad a{color:#888;font-weight:500}div.influads_powered_div{margin-top:5px}a.influads_text_a{font-size:11px}a.influads_powered_link{font-size:10px}div.carbonad{background-color:#fff;border:0}.carbonad-image,.carbonad-text,.carbonad-tag{margin-left:0 !important}.carbonad-image{margin-top:0 !important}pre{padding:1em;line-height:100%;overflow:scroll}code{font-family:"Menlo",monospace;font-size:12px}.highlight{color:#586e75}.highlight .c{color:#93a1a1}.highlight .err{color:#586e75}.highlight .g{color:#586e75}.highlight .k{color:#859900}.highlight .l{color:#586e75}.highlight .n{color:#586e75}.highlight .o{color:#859900}.highlight .x{color:#cb4b16}.highlight .p{color:#586e75}.highlight .cm{color:#93a1a1}.highlight .cp{color:#859900}.highlight .c1{color:#93a1a1}.highlight .cs{color:#859900}.highlight .gd{color:#2aa198}.highlight .ge{color:#586e75;font-style:italic}.highlight .gr{color:#dc322f}.highlight .gh{color:#cb4b16}.highlight .gi{color:#859900}.highlight .go{color:#586e75}.highlight .gp{color:#586e75}.highlight .gs{color:#586e75;font-weight:bold}.highlight .gu{color:#cb4b16}.highlight .gt{color:#586e75}.highlight .kc{color:#cb4b16}.highlight .kd{color:#268bd2}.highlight .kn{color:#859900}.highlight .kp{color:#859900}.highlight .kr{color:#268bd2}.highlight .kt{color:#dc322f}.highlight .ld{color:#586e75}.highlight .m{color:#2aa198}.highlight .s{color:#2aa198}.highlight .na{color:#586e75}.highlight .nb{color:#b58900}.highlight .nc{color:#268bd2}.highlight .no{color:#cb4b16}.highlight .nd{color:#268bd2}.highlight .ni{color:#cb4b16}.highlight .ne{color:#cb4b16}.highlight .nf{color:#268bd2}.highlight .nl{color:#586e75}.highlight .nn{color:#586e75}.highlight .nx{color:#586e75}.highlight .py{color:#586e75}.highlight .nt{color:#268bd2}.highlight .nv{color:#268bd2}.highlight .ow{color:#859900}.highlight .w{color:#586e75}.highlight .mf{color:#2aa198}.highlight .mh{color:#2aa198}.highlight .mi{color:#2aa198}.highlight .mo{color:#2aa198}.highlight .sb{color:#93a1a1}.highlight .sc{color:#2aa198}.highlight .sd{color:#586e75}.highlight .s2{color:#2aa198}.highlight .se{color:#cb4b16}.highlight .sh{color:#586e75}.highlight .si{color:#2aa198}.highlight .sx{color:#2aa198}.highlight .sr{color:#dc322f}.highlight .s1{color:#2aa198}.highlight .ss{color:#2aa198}.highlight .bp{color:#268bd2}.highlight .vc{color:#268bd2}.highlight .vg{color:#268bd2}.highlight .vi{color:#268bd2}.highlight .il{color:#2aa198}#container{max-width:550px;margin:50px auto;padding:0 10px;position:relative;z-index:1}.content{margin-top:-1em}h2{float:left}h1{clear:both}ul#menu{float:right;padding:10px 0 10px}ul#menu li{display:inline;margin-left:10px}ul#menu form{display:inline}ul.articles{list-style-type:none}ul.articles li,div.result{margin-bottom:30px}ul.articles p,div.result p{margin:0}p.more{margin-top:-20px}.content img{width:100%;-webkit-border-radius:5px}#loading{margin:auto;width:32px;height:32px;background-image:url('/images/loading.gif')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url('/OpenSans-Bold.woff') format('woff')}@font-face{font-family:'Intro';font-style:normal;font-weight:500;src:local('Intro'),local('Intro'),url('/Intro.woff') format('woff')}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:16px;line-height:150%;color:#2b2b2b}#menu{font-size:80%}a{color:#4b4b4b;text-decoration:none;font-weight:900}a:hover{color:#2b2b2b}h2 a,h2 a:hover{color:#fff;display:block;line-height:150%;background-color:#2b2b2b;padding:10px;font-size:80%;-webkit-border-radius:5px}h1{font-family:"Intro","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:38px;line-height:100%;padding:50px 0;text-rendering:optimizeLegibility}h1,h1 a{font-weight:500}h1 a{color:#2b2b2b;border-bottom:3px solid #eee}h3{font-family:"Open sans","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:140%;line-height:100%}h4{font-family:"Intro","Helvetica Neue",Helvetica,Arial,sans-serif;margin-bottom:10px}.date,.small,h4{color:#888;font-size:80%}p{margin:1em 0}a.anchor{padding-top:50px}em{font-style:italic}.info{display:none !important}</style>
  <link rel="alternate" type="application/atom+xml" href="/feed.xml" />
  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link href="/images/icon.jpg" rel="apple-touch-icon" />
  <meta name="viewport" content="initial-scale=1, user-scalable=yes">
</head>
<body>
  <div id="container">
    <h2>
      <a class="" href="/">
        Jeff Kreeftmeijer
      </a>
    </h2>

    <ul id="menu">
      <li><a href="http://shorts.jeffkreeftmeijer.com">Shorts</a></li>
      <li><a href="/archive">Archive</a></li>
      <li><a href="/contact">Contact</a></li>
    </ul>
    <h1>MicroGems: five minute RubyGems</h1>
    <span class="date">2011-10-03</span>

<div class="content">
  <p class="small">
<strong>Note:</strong> This is just something I've been playing around with. I'm not saying you should do this and I'm not implying this is better than what you're doing right now. I'm just sharing some experiences from a quick experiment.
</p>

<p>For <a href="http://codebrawl.com">Codebrawl</a>, I created a library that could take a method from a model &#8211; like <code>calculate_score</code> for example &#8211; and give it a corresponding bang method &#8211; <code>calculate_score!</code> in this case &#8211; that saves the results using a simple <code>update_attribute</code> call. In your model, I can just do this:</p>

<div class="highlight">
<pre><code class="ruby"><span class="k">class</span> <span class="nc">User</span>

 <span class="n">bang</span> <span class="ss">:calculate_score</span> <span class="o">=&gt;</span> <span class="ss">:score</span>

 <span class="k">def</span> <span class="nf">calculate_score</span>
   <span class="mi">100</span> <span class="c1"># Removed fancy logic for presentational purposes</span>
 <span class="k">end</span>

<span class="k">end</span>
</code></pre>
</div>

<p>Now, calling <code>calculate_score!</code> will save the results of <code>calculate_score</code> to the score attribute. It&#8217;s one 4-line method in one file and it has a 25-line spec. Simple.</p>

<p><a href="https://gist.github.com/1232884"><img alt="MicroGem" src="http://jeffkreeftmeijer.com/images/microgem.png"></a></p>

<p>After a while, I ran into the same &#8220;issue&#8221; in another project. I wanted to use my new Bang library, but I didn&#8217;t want to copy it over to the new project and I didn&#8217;t feel like starting a new repository on <a href="https://github.com">Github</a> because that would mean I&#8217;d have to write a <code>README</code>, squat a name on <a href="http://rubygems.org">RubyGems</a>, accept issues and support it forever. It just felt too small for that.</p>

<p>Instead, <a href="https://gist.github.com/1232884">I put the library into a Gist</a>. The great thing about Gists is that they&#8217;re full Git repositories in disguise, so I can just clone my library, work on it and push a new &#8220;release&#8221; without having to fiddle around in Gist&#8217;s web interface.</p>

<p>To be able to use it as a RubyGem, the only thing I needed to do was add a very, <em>very</em> simple <a href="https://gist.github.com/1232884#file_bang.gemspec">gemspec</a>. The thing you have to keep in mind is that you can&#8217;t have any directories in Gists (you could, but these files are hidden in the web interface). This means your gemspec will be a bit different from what you normally do. Instead of doing crazy git command magic, you&#8217;ll set your <code>files</code>, <code>test_file</code> and <code>require_path</code> like this:</p>

<div class="highlight">
<pre><code class="ruby"><span class="n">s</span><span class="o">.</span><span class="n">files</span>         <span class="o">=</span> <span class="o">[</span><span class="s1">'bang.rb'</span><span class="o">]</span>
<span class="n">s</span><span class="o">.</span><span class="n">test_file</span>     <span class="o">=</span> <span class="s1">'bang_spec.rb'</span>
<span class="n">s</span><span class="o">.</span><span class="n">require_path</span>  <span class="o">=</span> <span class="s1">'.'</span>
</code></pre>
</div>

<p>Using the power of Bundler, I can now require my library in my projects, without even having to push it to RubyGems:</p>

<div class="highlight">
<pre><code class="ruby"><span class="n">gem</span> <span class="s1">'bang'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'git://gist.github.com/1232884.git'</span>
</code></pre>
</div>

<h3 id="trying_this_at_home">Trying this at home</h3>

<p>See how easy it is to create your own RubyGem? The only thing you need is an implementation and a gemspec. Since Bang isn&#8217;t much more than that right now, I think a Gist is sufficient. At least for now.</p>

<p>If your project is bigger than this or has any users besides yourself, you&#8217;re probably going to have to create a proper Github repository and push it to RubyGems. Gists don&#8217;t support Github&#8217;s issues, you can&#8217;t accept pull requests and you can&#8217;t use directories. As long as your library doesn&#8217;t need any of that, I think you&#8217;ll be fine with something as simple as this.</p>

<p>I&#8217;ve been using my &#8220;MicroGem&#8221; for a while now and I haven&#8217;t run into any issues yet. Do you foresee problems with this approach or do you have any ideas to make it even better? Please let me know in the comments!</p>

</div>

  </div>

  <div id="ads">
    <div class="ad">
      <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=jeffkreeftmeijercom" id="_carbonads_js"></script>
    </div>
  </div>

  <script type="text/javascript" async="true" id="gauges-tracker" data-site-id="4d62819ef0d8804188000010" src="http://secure.gaug.es/track.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12888762-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
