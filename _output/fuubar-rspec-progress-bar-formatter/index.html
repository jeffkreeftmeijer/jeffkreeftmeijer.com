<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Fuubar: the instafailing RSpec progress bar formatter</title>
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="description" content="Combining the work of Nick Evans and Michael Grosser in an attempt to create a better RSpec formatter">
<meta name="author" content="Jeff Kreeftmeijer">
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo=">
<link rel="alternate" type="application/atom+xml" href="/feed.xml">
<link rel="canonical" href="https://jeffkreeftmeijer.com/fuubar/">
<link rel="amphtml" href="https://jeffkreeftmeijer.com/fuubar/amp.html">
<style>body{font:18px/1.4 system-ui,sans-serif;margin:auto;max-width:40em;padding:0 1em}img,video{max-width:100%;height:auto}@media (max-width:375px){body{font-size:.9em}}@media (max-width:320px){body{font-size:.8em}}code,kbd,pre{font-family:SF Mono,Monaco,monospace}pre{background-color:#f8f8ff;font-size:.9em;overflow-x:auto;padding:1em}table{border-collapse:collapse;width:100%}td,th{padding:.5em;border:1px solid}nav{display:flex;justify-content:space-between;margin:1em 0}body{-webkit-font-smoothing:antialiased}.admonition-block p,figure{margin:0}.byline,.small,figcaption{font-size:smaller}dt{font-weight:600}dd{margin-bottom:1em}.admonition-block,.sidebarblock{border:1px solid #d3d3d3;box-shadow:3px 3px 0 0 #f5f5f5;padding:1em;margin:1em 0}.admonition-block h6{float:left;height:1em;margin:0 .25em 0 0;font-size:1em}.sidebarblock>:first-child{margin-top:0}.sidebarblock>:last-child{margin-bottom:0}.warning{background-color:ivory}.caution,.important{background-color:#fff0f5}.note,.tip{background-color:#f0f8ff}.warning h6::before{content:"‚ö†Ô∏è "}.tip h6::before{content:"üí° "}.note h6::before{content:"‚ÑπÔ∏è "}aside.ad{position:absolute;top:1.34em;left:50%;width:50%;overflow:hidden;z-index:-100}aside.ad img{height:100px}aside.ad div#cf_ad{display:block;width:130px;margin-left:22em}aside.ad a{text-decoration:none;color:gray;font-size:small;display:block;margin-bottom:1em}.cf-powered-by{font-style:italic}</style>

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@jkreeftmeijer">
<meta name="twitter:creator" content="@jkreeftmeijer">
<meta name="twitter:title" content="Fuubar: the instafailing RSpec progress bar formatter">
<meta name="twitter:description" content="Combining the work of Nick Evans and Michael Grosser in an attempt to create a better RSpec formatter">
<meta name="twitter:image" content="https://jeffkreeftmeijer.com/fuubar/fuubar.png">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jeffkreeftmeijer.com/fuubar/"
  },
  "headline": "Fuubar: the instafailing RSpec progress bar formatter",
  "image": ["https://jeffkreeftmeijer.com/fuubar/fuubar.png"],
  "datePublished": "2010-11-15",
  "dateModified": "2018-10-23T20:44:06Z",
  "author": {
    "@type": "Person",
    "name": "Jeff Kreeftmeijer"
  },
  "description": "Combining the work of Nick Evans and Michael Grosser in an attempt to create a better RSpec formatter",
  "publisher": {
    "@type": "Organization",
    "name": "jeffkreeftmeijer.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jeffkreeftmeijer.com/logo.png"
    }
  }
}
</script>
</head>
<body>
<h1>Fuubar: the instafailing RSpec progress bar formatter</h1>
<p class="byline">
  By <a href="/" rel="author">Jeff Kreeftmeijer</a> on <time datetime="2010-11-15">2010-11-15 (last updated on <time datetime="2018-10-23T20:44:06Z">2018-10-23</time>)
</p>

<article>
<section id="preamble" aria-label="Preamble"><p>As you might have noticed, I‚Äôve been spending some time trying to get running test suites with <a href="https://github.com/rspec">RSpec</a> a bit better and faster over the last weeks. This week I looked into RSpec‚Äôs formatters.</p>
<div class="image-block"><img src="http://jeffkreeftmeijer.com/images/fuubar.png" alt="fuubar"></div>
<p>Aside from the red ‚ÄúF‚Äù RSpec will output when a spec fails, there‚Äôs no direct feedback that allows you to go fix things immediately. You‚Äôll simply have to wait until your whole suite is done running, or use <code>^C</code> to interrupt the run. Another thing you can do is use <a href="http://jeffkreeftmeijer.com/2010/making-rspec-stop-operation-immediately-after-failing">the <code>--fail-fast</code> option I wrote about last week</a> or check out <a href="https://github.com/grosser/rspec-instafail">rspec-instafail</a>, which will output the failure details while continuing to run the rest of your specs. Nice.</p>
<p>Besides that, I realized there were more things that could be improved on, like knowing the total number of specs, the number of specs that have run already and maybe even an ETA or something like that. Also, the big string of dots and "F"‚Äôs started to seem unnecessary, there should be a nicer way to display this information.</p>
<p>I checked out RSpec‚Äôs formatters and realized it was extremely easy to write one, so I got distracted and wrote <a href="http://gist.github.com/676219">FffuuuFormatter</a>, which makes RSpec print FFFUUU instead of FFFFF. Heh.</p></section>
<section class="doc-section level-1"><h2 id="fuubar">Fuubar</h2><p>After looking around for a bit, I found an article by <a href="http://twitter.com/nick_evans">@nick_evans</a> posted in 2008, in which he tried to fix some of the issues I‚Äôm having with a <a href="http://ekenosen.net/nick/devblog/2008/12/better-progress-bar-for-rspec">progress bar formatter</a>. Nick wrote a really nice solution for it using the <a href="http://rubygems.org/gems/progressbar">progressbar gem</a> by <a href="http://twitter.com/peleteiro">@peleteiro</a>.</p>
<p>I decided to continue Nick‚Äôs work and got the formatter up to speed with RSpec 2, using rspec-instafail to handle the direct feedback after every failure.  I put the whole thing in a gem and <a href="http://twitter.com/josevalim">@josevalim</a> came up with the name: <a href="http://github.com/jeffkreeftmeijer/fuubar">Fuubar</a>.</p>
<p>Here‚Äôs a <a href="http://vimeo.com/16845253">short video of Fuubar in action</a>:</p>
<iframe src="https://player.vimeo.com/video/16845253" width="640" height="508" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<div class="literal-block"><pre>$ rspec --format Fuubar --color spec</pre></div>
<p>If you want to use Fuubar as your default formatter, simply put the options in your <code>.rspec</code> file:</p>
<div class="literal-block"><pre>--format Fuubar
--color</pre></div>
<p>After doing that you can simply run your specs like you‚Äôre used to:</p>
<div class="literal-block"><pre>$ rspec spec</pre></div></section>
<section class="doc-section level-1"><h2 id="fuuture">Fuuture</h2><p>As always: Let me know how you like it and be sure to create an <a href="http://github.com/jeffkreeftmeijer/fuubar/issues">issue on Github</a> if you have any ideas or run into any issues. Of course you can always fork the project and send a pull request.</p>
<p>Fuubar only works on RSpec 2 right now, but there‚Äôs no reason why it would be impossible to make it compatible with earlier versions. Also, Nick‚Äôs original code had some functionality to find slow specs, but I omitted it because I couldn‚Äôt really find a nice implementation.</p>
<p>So, there‚Äôs still a lot to do but I think this is quite an improvement from the current formatters. Maybe we can even turn this into a patch for RSpec to make Fuubar one of the default formatters. What do you think?</p></section>


</article>

<hr>
<p>
  Any questions, feedback or suggestions? Please respond on
  <a rel="nofollow" href="https://twitter.com/intent/tweet?url=https://jeffkreeftmeijer.com/fuubar/">Twitter</a>
   (or via
  <a rel="nofollow" href="https://twitter.com/messages/compose?recipient_id=8284992">direct message</a>)
  or send an
  <a rel="nofollow" href="mailto:&#x6a;&#x65;&#x66;&#x66;&#x6b;&#x72;&#x65;&#x65;&#x66;&#x74;&#x6d;&#x65;&#x69;&#x6a;&#x65;&#x72;&#x40;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;&#x3f;&#x73;&#x75;&#x62;&#x6a;&#x65;&#x63;&#x74;&#x3d;&#x4f;&#x6e;&#x20;&#x201c;&#x46;&#x75;&#x75;&#x62;&#x61;&#x72;&#x3a;&#x20;&#x74;&#x68;&#x65;&#x20;&#x69;&#x6e;&#x73;&#x74;&#x61;&#x66;&#x61;&#x69;&#x6c;&#x69;&#x6e;&#x67;&#x20;&#x52;&#x53;&#x70;&#x65;&#x63;&#x20;&#x70;&#x72;&#x6f;&#x67;&#x72;&#x65;&#x73;&#x73;&#x20;&#x62;&#x61;&#x72;&#x20;&#x66;&#x6f;&#x72;&#x6d;&#x61;&#x74;&#x74;&#x65;&#x72;&#x201d;">e-mail</a>.
</p>
<hr/>
<nav>
  <a href="/" rel="author">Jeff Kreeftmeijer</a>
  <a rel="me" href="https://twitter.com/jkreeftmeijer">Twitter</a>
  <a rel="me" href="https://github.com/jeffkreeftmeijer">Github</a>
  <a href="/feed.xml">RSS</a>
</nav>

<aside class="ad" id="codefund_ad">
  <script async src="https://codefund.io/scripts/48fc837b-75ff-48f2-9cf2-3f52281d7721/embed.js"></script>
  <script>window._codefund_theme = '';</script>
</aside>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12888762-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>