<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="keywords" content="jeff kreeftmeijer, jeffkreeftmeijer" />
  <meta name="description" content="This would have saved me a lot of trouble." />
  <title>
    
      Setting up MongoDB, MongoMapper, GridFS, Devise & Carrierwave on OSX@matsimitsu
      
    
  </title>
  <style>body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}q:before,q:after{content:''}abbr,acronym{border:0}#ads{position:absolute;width:425px;max-width:50%;left:50%;top:145px;margin:auto;overflow:hidden;z-index:0}.ad{margin:0 0 20px 295px;width:130px;font-size:11px;line-height:1.2}.ad a{color:#888;font-weight:500}div.influads_powered_div{margin-top:5px}a.influads_text_a{font-size:11px}a.influads_powered_link{font-size:10px}div.carbonad{background-color:#fff;border:0}.carbonad-image,.carbonad-text,.carbonad-tag{margin-left:0 !important}.carbonad-image{margin-top:0 !important}pre{padding:1em;line-height:100%;overflow:scroll}code{font-family:"Menlo",monospace;font-size:12px}.highlight{color:#586e75}.highlight .c{color:#93a1a1}.highlight .err{color:#586e75}.highlight .g{color:#586e75}.highlight .k{color:#859900}.highlight .l{color:#586e75}.highlight .n{color:#586e75}.highlight .o{color:#859900}.highlight .x{color:#cb4b16}.highlight .p{color:#586e75}.highlight .cm{color:#93a1a1}.highlight .cp{color:#859900}.highlight .c1{color:#93a1a1}.highlight .cs{color:#859900}.highlight .gd{color:#2aa198}.highlight .ge{color:#586e75;font-style:italic}.highlight .gr{color:#dc322f}.highlight .gh{color:#cb4b16}.highlight .gi{color:#859900}.highlight .go{color:#586e75}.highlight .gp{color:#586e75}.highlight .gs{color:#586e75;font-weight:bold}.highlight .gu{color:#cb4b16}.highlight .gt{color:#586e75}.highlight .kc{color:#cb4b16}.highlight .kd{color:#268bd2}.highlight .kn{color:#859900}.highlight .kp{color:#859900}.highlight .kr{color:#268bd2}.highlight .kt{color:#dc322f}.highlight .ld{color:#586e75}.highlight .m{color:#2aa198}.highlight .s{color:#2aa198}.highlight .na{color:#586e75}.highlight .nb{color:#b58900}.highlight .nc{color:#268bd2}.highlight .no{color:#cb4b16}.highlight .nd{color:#268bd2}.highlight .ni{color:#cb4b16}.highlight .ne{color:#cb4b16}.highlight .nf{color:#268bd2}.highlight .nl{color:#586e75}.highlight .nn{color:#586e75}.highlight .nx{color:#586e75}.highlight .py{color:#586e75}.highlight .nt{color:#268bd2}.highlight .nv{color:#268bd2}.highlight .ow{color:#859900}.highlight .w{color:#586e75}.highlight .mf{color:#2aa198}.highlight .mh{color:#2aa198}.highlight .mi{color:#2aa198}.highlight .mo{color:#2aa198}.highlight .sb{color:#93a1a1}.highlight .sc{color:#2aa198}.highlight .sd{color:#586e75}.highlight .s2{color:#2aa198}.highlight .se{color:#cb4b16}.highlight .sh{color:#586e75}.highlight .si{color:#2aa198}.highlight .sx{color:#2aa198}.highlight .sr{color:#dc322f}.highlight .s1{color:#2aa198}.highlight .ss{color:#2aa198}.highlight .bp{color:#268bd2}.highlight .vc{color:#268bd2}.highlight .vg{color:#268bd2}.highlight .vi{color:#268bd2}.highlight .il{color:#2aa198}#container{max-width:550px;margin:50px auto;padding:0 10px;position:relative;z-index:1}.content{margin-top:-1em}h2{float:left}h1{clear:both}ul#menu{float:right;padding:10px 0 10px}ul#menu li{display:inline;margin-left:10px}ul#menu form{display:inline}ul.articles{list-style-type:none}ul.articles li,div.result{margin-bottom:30px}ul.articles p,div.result p{margin:0}p.more{margin-top:-20px}.content img{width:100%;-webkit-border-radius:5px}#loading{margin:auto;width:32px;height:32px;background-image:url('/images/loading.gif')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:700;src:local('Open Sans Bold'),local('OpenSans-Bold'),url('/OpenSans-Bold.woff') format('woff')}@font-face{font-family:'Intro';font-style:normal;font-weight:500;src:local('Intro'),local('Intro'),url('/Intro.woff') format('woff')}body{font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:16px;line-height:150%;color:#2b2b2b}#menu{font-size:80%}a{color:#4b4b4b;text-decoration:none;font-weight:900}a:hover{color:#2b2b2b}h2 a,h2 a:hover{color:#fff;display:block;line-height:150%;background-color:#2b2b2b;padding:10px;font-size:80%;-webkit-border-radius:5px}h1{font-family:"Intro","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:38px;line-height:100%;padding:50px 0;text-rendering:optimizeLegibility}h1,h1 a{font-weight:500}h1 a{color:#2b2b2b;border-bottom:3px solid #eee}h3{font-family:"Open sans","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:140%;line-height:100%}h4{font-family:"Intro","Helvetica Neue",Helvetica,Arial,sans-serif;margin-bottom:10px}.date,.small,h4{color:#888;font-size:80%}p{margin:1em 0}a.anchor{padding-top:50px}em{font-style:italic}.info{display:none !important}</style>
  <link rel="alternate" type="application/atom+xml" href="/feed.xml" />
  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
  <link href="/images/icon.jpg" rel="apple-touch-icon" />
  <meta name="viewport" content="initial-scale=1, user-scalable=yes">
</head>
<body>
  <div id="container">
    <h2>
      <a class="" href="/">
        Jeff Kreeftmeijer
      </a>
    </h2>

    <ul id="menu">
      <li><a href="http://shorts.jeffkreeftmeijer.com">Shorts</a></li>
      <li><a href="/archive">Archive</a></li>
      <li><a href="/contact">Contact</a></li>
    </ul>
    <h1>Setting up MongoDB, MongoMapper, GridFS, Devise & Carrierwave on OSX@matsimitsu</h1>
    <span class="date">2010-05-17</span>

<div class="content">
  <div class="notice">
Sorry, this article is a bit outdated. Lucky for you, <a href="http://twitter.com/antekpiechnik">@antekpiechnik</a> wrote <a href="http://antekpiechnik.com/posts/setting-up-carrierwave-file-uploads-using-gridfs-on-rails-3-and-mongoid">a really nice guide</a> in which he uses Mongoid and Rails 3. Be sure to check that out too!
</div>

<p>For a little side project I wanted to experiment with <a href="http://www.mongodb.org/">MongoDB</a> and <a href="http://www.mongodb.org/display/DOCS/GridFS">GridFS</a> on Rails 2.3.5, but it took me a while to get everything up and running.</p>

<p>It wasn&#8217;t really a problem with Mongrel, but as soon as Apache and <a href="http://www.modrails.com/">Passenger</a> came in the picture the problems began.</p>

<h3>The gems</h3>

<p>Development setup:</p>

<div class="highlight">
<pre><code class="ruby"><span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'carrierwave'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'devise'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'mongo_mapper'</span><span class="p">,</span> <span class="ss">:version</span> <span class="o">=&gt;</span> <span class="s1">'0.7.0'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'mongomapper_ext'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'will_paginate'</span>
</code></pre>
</div>

<p>If you want to use GridFS with MongoDB, make sure you use <a href="http://github.com/jnunemaker/mongomapper">MongoMapper</a> 0.7.0, because later versions cause:</p>

<pre><code>mongo/GridFS not found</code></pre>

<p>Test setup:</p>

<div class="highlight">
<pre><code class="ruby"><span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'rspec'</span><span class="p">,</span> <span class="ss">:lib</span> <span class="o">=&gt;</span> <span class="s1">'spec'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'rspec-rails'</span><span class="p">,</span> <span class="ss">:lib</span> <span class="o">=&gt;</span> <span class="s1">'spec/rails'</span>

<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'machinist_mongo'</span><span class="p">,</span>
  <span class="ss">:version</span> <span class="o">=&gt;</span> <span class="s1">'1.1.0'</span><span class="p">,</span>
  <span class="ss">:lib</span> <span class="o">=&gt;</span> <span class="s1">'machinist/mongo_mapper'</span>

<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'faker'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'steak'</span>
<span class="n">config</span><span class="o">.</span><span class="n">gem</span> <span class="s1">'capybara'</span>
</code></pre>
</div>

<h3>MongoMapper</h3>

<p>To use <a href="http://github.com/jnunemaker/mongomapper">MongoMapper</a> add the following to your <code>config/initializers</code>:</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># config/initializers/mongo_mapper.rb</span>

<span class="c1"># load YAML and connect</span>
<span class="n">database_yaml</span> <span class="o">=</span> <span class="ss">YAML</span><span class="p">:</span><span class="ss">:load</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="no">RAILS_ROOT</span> <span class="o">+</span> <span class="s1">'/config/database.yml'</span><span class="p">))</span>
<span class="k">if</span> <span class="n">database_yaml</span><span class="o">[</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="n">database_yaml</span><span class="o">[</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">][</span><span class="s1">'adapter'</span><span class="o">]</span> <span class="o">==</span> <span class="s1">'MongoDB'</span>
  <span class="n">mongo_database</span> <span class="o">=</span> <span class="n">database_yaml</span><span class="o">[</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">]</span>
  <span class="no">MongoMapper</span><span class="o">.</span><span class="n">connection</span> <span class="o">=</span> <span class="ss">Mongo</span><span class="p">:</span><span class="ss">:Connection</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mongo_database</span><span class="o">[</span><span class="s1">'host'</span><span class="o">]</span><span class="p">,</span> <span class="mi">27017</span><span class="p">,</span> <span class="ss">:pool_size</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="ss">:timeout</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">)</span>
  <span class="no">MongoMapper</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span>  <span class="n">mongo_database</span><span class="o">[</span><span class="s1">'database'</span><span class="o">]</span>
<span class="k">end</span>

<span class="k">if</span> <span class="n">defined?</span><span class="p">(</span><span class="no">PhusionPassenger</span><span class="p">)</span>
   <span class="no">PhusionPassenger</span><span class="o">.</span><span class="n">on_event</span><span class="p">(</span><span class="ss">:starting_worker_process</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">forked</span><span class="o">|</span>
     <span class="no">MongoMapper</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">connect_to_master</span> <span class="k">if</span> <span class="n">forked</span>
   <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>The <code>PusionPassenger</code> section can be removed if you are not planning to run this on Apache and Passenger.</p>

<p>If you <em>do</em> plan to run it, make sure this is in your config. It will make sure new spawned Apache children still have a MongoDB database connection and prevent you from pulling out all your hair.</p>

<p>You can now setup your <code>config/database.yml</code> config. Example:</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># config/database.yml</span>

<span class="ss">development</span><span class="p">:</span>
  <span class="ss">adapter</span><span class="p">:</span> <span class="n">mongodb</span>
  <span class="ss">database</span><span class="p">:</span> <span class="n">mmyapp_development</span>
  <span class="ss">host</span><span class="p">:</span> <span class="n">localhost</span>
</code></pre>
</div>

<h3>Devise</h3>

<p>Setting up <a href="http://github.com/plataformatec/devise">Devise</a> is pretty easy, just use the following snippet:</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># config/initializers/devise.rb</span>

<span class="no">Devise</span><span class="o">.</span><span class="n">setup</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">mailer_sender</span> <span class="o">=</span> <span class="s2">"info@example.com"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">orm</span> <span class="o">=</span> <span class="ss">:mongo_mapper</span>
<span class="k">end</span>
</code></pre>
</div>

<p>And use it in your (user) model:</p>

<div class="highlight">
<pre><code class="ruby"><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">Base</span>
  <span class="kp">include</span> <span class="ss">MongoMapper</span><span class="p">:</span><span class="ss">:Document</span>
  <span class="kp">include</span> <span class="ss">MongoMapperExt</span><span class="p">:</span><span class="ss">:Slugizer</span>

  <span class="n">devise</span> <span class="ss">:registerable</span><span class="p">,</span> <span class="ss">:database_authenticatable</span><span class="p">,</span> <span class="ss">:recoverable</span><span class="p">,</span> <span class="ss">:rememberable</span><span class="p">,</span> <span class="ss">:trackable</span><span class="p">,</span> <span class="ss">:validatable</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Since we are on MongDB you can skip the migrations!</p>

<h3>Carrierwave</h3>

<p>Next up is image uploading, I used <a href="http://github.com/jnicklas/carrierwave">Carrierwave</a>.</p>

<p>Again some configuration, this time make sure that the <code>application_#{Rails.env}</code> is consistent with your <code>database.yml</code> file.</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># config/initializers/carrierwave.rb</span>

<span class="no">CarrierWave</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">grid_fs_database</span> <span class="o">=</span> <span class="s2">"application_</span><span class="si">#{</span><span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">grid_fs_host</span> <span class="o">=</span> <span class="s1">'localhost'</span>
  <span class="n">config</span><span class="o">.</span><span class="n">grid_fs_access_url</span> <span class="o">=</span> <span class="s2">"/GridFS"</span>
  <span class="n">config</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="ss">:grid_fs</span>
<span class="k">end</span>
</code></pre>
</div>

<p>With Carrierwave configured we can now implement it in our model.</p>

<p>An example is:</p>

<div class="highlight">
<pre><code class="ruby"><span class="k">class</span> <span class="nc">Photo</span>
  <span class="nb">require</span> <span class="s1">'carrierwave/orm/mongomapper'</span>
  <span class="kp">include</span> <span class="ss">MongoMapper</span><span class="p">:</span><span class="ss">:Document</span>

  <span class="n">mount_uploader</span> <span class="ss">:image</span><span class="p">,</span> <span class="no">ImageUploader</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Note the <code>mount_uploader</code>. This will tell Carrierwave to look for a file called <code>image_uploader</code> in <code>/app/uploaders/</code>.</p>

<p>That file should contain some of the following:</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># app/uploaders/image_uploader.rb</span>
<span class="k">class</span> <span class="nc">ImageUploader</span> <span class="o">&lt;</span> <span class="ss">CarrierWave</span><span class="p">:</span><span class="ss">:Uploader</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="ss">CarrierWave</span><span class="p">:</span><span class="ss">:ImageScience</span>

  <span class="n">storage</span> <span class="ss">:grid_fs</span>

  <span class="k">def</span> <span class="nf">store_dir</span>
    <span class="s2">"files/</span><span class="si">#{</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">extension_white_list</span>
    <span class="sx">%w(jpg jpeg gif png)</span>
  <span class="k">end</span>

  <span class="n">version</span> <span class="ss">:small_thumb</span> <span class="k">do</span>
    <span class="n">process</span> <span class="ss">:resize_to_fill</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>A couple of things are important here, first the <code>storage :grid_fs</code>. It will tell Carrierwave to store the files in GridFS.</p>

<p>Next is the <code>def store_dir</code>. This is used to generate the path to the images.</p>

<pre><code>/GridFS/files/[ID]/[filename].[ext]</code></pre>

<p>Note that the path is prefixed with <code>/GridFS</code>. This is the value we have set in the config of Carrierwave.</p>

<p>To serve out the files from Rails we are using a <a href="http://gist.github.com/264077">GridFS metal</a>. This will increase the speed of image serving.</p>

<div class="highlight">
<pre><code class="ruby"><span class="c1"># app/metal/grid_fs.rb</span>

<span class="c1"># Rails metal to be used with Carrierwave (GridFS) and MongoMapper</span>

<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'mongo'</span>
<span class="nb">require</span> <span class="s1">'mongo/GridFS'</span>

<span class="c1"># Allow the metal piece to run in isolation</span>
<span class="nb">require</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">__FILE__</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/../../config/environment"</span><span class="p">)</span> <span class="k">unless</span> <span class="n">defined?</span><span class="p">(</span><span class="no">Rails</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GridData</span> <span class="o">&lt;</span> <span class="ss">Rails</span><span class="p">:</span><span class="ss">:Rack</span><span class="o">::</span><span class="no">Metal</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">call</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">env</span><span class="o">[</span><span class="s2">"PATH_INFO"</span><span class="o">]</span> <span class="o">=~</span> <span class="sr">/^\/GridFS\/(.+)$/</span>
      <span class="n">key</span> <span class="o">=</span> <span class="vg">$1</span>
      <span class="k">if</span> <span class="o">::</span><span class="ss">GridFS</span><span class="p">:</span><span class="ss">:GridStore</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="no">MongoMapper</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="o">::</span><span class="ss">GridFS</span><span class="p">:</span><span class="ss">:GridStore</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="no">MongoMapper</span><span class="o">.</span><span class="n">database</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
          <span class="o">[</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="o">.</span><span class="n">content_type</span><span class="p">},</span> <span class="o">[</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="o">]]</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="o">[</span><span class="mi">404</span><span class="p">,</span> <span class="p">{</span><span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">},</span> <span class="o">[</span><span class="s1">'File not found.'</span><span class="o">]]</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="o">[</span><span class="mi">404</span><span class="p">,</span> <span class="p">{</span><span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'text/plain'</span><span class="p">},</span> <span class="o">[</span><span class="s1">'File not found.'</span><span class="o">]]</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>An important thing to note is the regex part:</p>

<pre><code>if env["PATH_INFO"] =~ /^\/GridFS\/(.+)$/</code></pre>

<p>The GridFS in the regex is the same as in your Carrierwave config!</p>

<h3>
<span class="caps">OSX</span> and open files</h3>

<p>At some point when I began stress testing MongoDB by requesting a <em>lot</em> of files from GridFS. MongoDB would become unresponsive and eventually crash the Rails application.</p>

<p>After a deep dive into the logs I found out that MongoDB has a lot of files open. More then the 256 that <span class="caps">OSX</span> wil allow by default.</p>

<p>To fix this use the <a href="http://serverfault.com/questions/15564/where-are-the-default-ulimits-specified-on-os-x-10-5">following from serverfault</a>, it will basically set the open files limit a lot higher for <span class="caps">OSX</span>.</p>

<p>To change any of these limits, add a line (you may need to create the file first) to <code>/etc/launchd.conf</code>, the arguments are the same as passed to the <code>launchctl</code> command. For example:</p>

<pre><code>sudo echo "limit maxfiles 1024 unlimited" &gt; /etc/launchd.conf</code></pre>

<p>However <code>launchd</code> has already started your login shell, so the simplest way to make these changes take effect is to restart our machine.</p>

<h3>That&#8217;s it!</h3>

<p>Well that&#8217;s it! you should now have a working Rails 2.3.5 stack with MongoMapper, files served from GridFS, authentication from Devise and image uploading with Carrierwave.</p>

</div>

  </div>

  <div id="ads">
    <div class="ad">
      <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=jeffkreeftmeijercom" id="_carbonads_js"></script>
    </div>
  </div>

  <script type="text/javascript" async="true" id="gauges-tracker" data-site-id="4d62819ef0d8804188000010" src="http://secure.gaug.es/track.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12888762-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
